language: node_js
sudo: required
services:
- docker
env:
  global:
  - secure: BonkEHaR/Vv0mg/lUuo4KU2osvl0BK6C2E9tAJ7uTDvcDm0G6K90cVJyu+j6KHLOnMBqcqmNuyZ9EddZFJhGHinYScp0zNbaXsJtndTNgkY+5GpTTP+qYA/UQiCkg4Aok3IwcDWptu1+MP8TPwBDpF5APxQts0HVFVzhqeBwI10RXrUNUy5FmPvTOO3qU6FRpwqmh1Fxu5AerLSNVYUt2tWUMz7E8x2JvIYOSoWC9xPRrBvwnPCVSIZk+sFEglv9tkSRFT7TkUoEKUurvCOO2waZN1RNZWvUXEm1dAa8kJ2FISOPkhYUo6g+BycGBSPK7gf65FOgxf4BNsklNeaE43XG6MimygpKd6pNUmlZTmqLMS7JNFiSbn3X2fbcNgElbxpObpQlPLE0u4TIMnvFTFM80q7eDAQ24s7wHKqtyMtKSqsx9OtVWMQMREjvTYVzCFTPis76CI5SUNkTrQGPgl4tiOU70RyswzkffXzlvTc2cmGKVeLTKd7hmqdFbYTCvYxxkf+InVy6UPpLvoerF0xNLPHY096sZqEaksSRLwZ84BgjLkNNH9HyxdkgclZnJ49t3J+2Bvx+07WYJqjrsS9ccjes5pyx2Tdzyh7d5l9SBSQ7UAzMlyJlU8ZMdQ50BPTkzHoyyP9qcusoxSF6Ea7aZJDZz90mx3cH64dfK8o=
  - secure: QEGdvwtZhookns50PUWaXZB0xPGnxp4g/VC2/S/7rLG2WYtmkoU4OmnM1KfHcDSRnxd9p9V8VWlvEYZZ7ElRF18KMQy+Eq6PBzul4x0qdwtRPKA1CQ1hth8yTUO204rXFP6IMAX+FzUcRmBtkvcpuzfr5Kxc5TTKmOaUApjOMVxU0httRxvCmWCFxKmOdNPgeB4+qUtNjQOQ9IRXyHYGmIQLcSAhgwdT9A9htqAHB0CrE2Pb/Kv5GNo+b2LpewgYwu1PXvOfbrIeJoP3DwWJYAjJ0nYdFkmsRuWLS1tHxPmfpQHoJdmIEYYqv8laVRQV+H+5rtQuSSFqAFcKWdTzTSTgeOtnJIluOR4ioB/Md+JLPDNH1RiL4KlCkGlerT/lr7oWCe2gTIy4/4hjQtTSQAp4Rc+Pl/E12VuwLbGFy2FLIt6pv3xgJ+FIDEKLYzws9Z0kWypMA9EQs/VxPnmEYFoyPoU/mFtUL9qcfhbla1Nx+TCYUZ5sbdjt/h2hLPA0aJhMGcBUOZZjaedBkg/dUJD/78c1YrAKlmGjnKYmpWz+nbSSwSgWvH5ChjF5GLIj+SX/4KC9/5Yab0qRMvaJ0n7tZhk6y0Zk9jdLfg1bIS+Te1HzEL0c8MBpDU1SbUfQ7BYgA3ppVuR2CVHLF3Nrv1Uu6QM31U+4l7scUd1rL5A=
  - secure: SRmBSNW6sWDko6ZpxFTyDuDOzN5651U2e/RgVyZdcrPkNku79QoSdoyeUK+Vi4fsNwVt8IryRzhaV/Sb13WpUTwhJ38rVc6BM8iRGXcXPfqUx2pmSR351N+elig2ZnPcK148AxSQ2g44lM0YxKK66mELGktQa5q52tbl8bWeuwyYboiwdaFV3hbMeYEZ7z5dsHGGpcfQ0WIJeuWy398To445z8el6bNNEmBnH0UeFNNXRxrSzKF+ZH+IjwlwGUJBFT84gd+8SIWgauN2pD+G4Xpji0ND1Vwx/DtTmCA3Ai/6zUZ7f7MZ88KNetRZPMHeKnrDQK7Mx+xJe3fjbE1nlczl44Q1nvltFlOCPFkfH9MKV+S6daXdrrED9LIL50+KhmUE+6xH1SDr8rn4JEOrlBJH4lp6AxpJjdfWX8VXuQ6/xA8TEK0GP/sScK7JmzZm8E2ioSZrYPMVKNIEUZvHtoKUv+26xHx7AdZhSZKUqTsn2cSY7Dyh8L1OVAzKaAWUwY57Sk4tZ1OG28bBeg8IddxmuQAdlRBlzLkZcIUn+pjb5mIaQf1Z7M5sgoVbVNB9MxH7TVNBhZTvv/wUT5ePCUe4Lop5TU5nDlJ3spR/y53l2Wsy4+H99jmUH5fAZdn8S/H8orKNR3mIpVoLnEhde1WB3HzEIdZ+g9KUf2yTaHw=
  - secure: U+vV8/6hXXr/CC40Z7HN1D7/g/LlNTWShq7B92oyONph5TadWSJ+3i8b11wvu75zgtmswFfhfs08c8r+Jo36RTVAJZlzIk5OQgPQrz4iYetlATScRHbq20UZzZeTWXU6jaSp5EseROVSXuoDDjGwUyZ1Larmx+0nxIJYF67sk0gC5JMoDjJG93VubRxwiTeXLnxHImtDkOgLZRtNnFug3mcqYgXDvonkY6t1bdyeO7wa4iRXK8REVpwceOQGsjaQ2F8z1EKPVxTPe0eSau2HdadDgYosWkOoLx6xOhIWFaEXUNkZpR0jy6+VgwGyla7mYMk3s7UcSqN1bB1gpH4f531JuV54EDwKg21xfQN9n6YILf/C26EziUH3RrJrnQXGdG4aVXzRwDt9M77wnnsweU8yaV8RIYfBb5RrS4X+6EILxa9Zk0mS4yz4Cb/MVTUMl63RRrx7QZzTfPFqprJ8M7VoCMMiz3BiYRv8KIKOwHLt83cUU48vyuyNhwyLkTZcSwi3ZzMm6JqyzqiGl8zWmpPWoQFFLG8nowjAgtZxHjmT4c5GVldN5Aa/XERC9FzD/mHvGMRv/hhYHONxMGeZpI7gR8+88jBVdfk8O47sSt5z7HfFR4ScKnR4u1FLm3n8ZKMTcwwig4wba9uAs/+Gy5FfR+e2RwacTLgD8Nt9G14=
  - secure: jVYEIol/gEFaCANK86ZQL1L96oJyMMetkStE7QPl0ERGqrOMVDUMciYSJlKmgYv15zPYCm9pqKCcVvv+1Vv7k6pdKzwdF4e11iJ4w9lGx60SL1Ilp/ANOhPgLw+tjKB0XsSCg7mIZms1saH+5JUmZ/Azs2enxGU4i2dMuYm6e+jCKwNjsAsvfn/tWktoj9K6v5F29kMoEjI6nypcBNzBvg51EmDHby8ObTb6DkTpfT0Jmp6rIbwzcAjsRLz52eXjUMHgXvmZ+1N7Zk993qVU+W35I4isTNSuCAIyceeMJY0y0cpnn3pPa2GC7Tr9JdxHRmntigkSGcoxglbeZ7k9K/wr7VtgGpSdLULklHI/qptLfNcN1huX4GamqkzO6/cG4v2+CPwt3YcCqKJZeP5DWQmUAhlHuMjnmgwmvepqwh8B3BS1hCh0eljnXXCPYyG/PuPWLLM09vP7ZL+eXuBOf7ZsI3NtiUrHo4zAiuFO2dTuNmLXxbBdx3Dj7EAVCHLffgKGO1h97Fqk9WbniTa+7ixq4maAbsfcSeVfd/4dqx3CFzoWA1N0Yp7XHQ76FNsHpzPlZCEPbHlvIvcqHXbVQWmyk1NMIg658zvShiglsmHwPqtH5WtSFeOO8iz1+B0XjdWhEs8rlgJbwRmvislVM+7+qCsx0wxvehtsZxH7w5c=
node_js:
- 11.10.0
before_install:
- openssl aes-256-cbc -K $encrypted_5122d9ef9a02_key -iv $encrypted_5122d9ef9a02_iv
  -in deploy_rsa.enc -out deploy_rsa -d
install:
- cd $TRAVIS_BUILD_DIR/frontend && npm install
- cd $TRAVIS_BUILD_DIR/backend && npm install
script:
- echo "skipping tests for now"
after_success:
- cd $TRAVIS_BUILD_DIR/frontend && docker build -t jankonenergia/frontend .
- cd $TRAVIS_BUILD_DIR/backend && docker build -t jankonenergia/backend .
deploy:
- skip-cleanup: true
- provider: script
  script: "chmod +x ./docker_push.sh && ./docker_push.sh"
  on:
    branch: master
- provider: script
  script: "chmod +x ./deploy.sh && ./deploy.sh"
  on:
    branch: master
